#!/bin/bash
source ./neat_functions


## Preparing arguments ######
while [ "$1" != "" ]; do
    case $1 in
        -f | --file )           shift
                                filename=$1
                                ;;
        -c | --column )           shift
                                col=$1
                                ;;
        -s | --separator )      shift
                                sep=$1
                                ;;
        -r | --rowseparator )   shift
                                row_sep=$1
                                ;;
     esac
    shift
done


if [ "$sep" == "" ] 
then
    separator="\"*,\"*"	
fi

if [ "$row_sep" == "" ]
then
    row_sep="|"
fi

if [ "$col" == "" ]
then
    echo "ERROR - No column"
    exit 1
fi

if [ "$filename" == "" ]
then
    echo "ERROR - No filename"
    exit 1
fi
############################################################

#
awk -F, -v n_column=$(find_column) -v OFS=, -v rowsep=$row_sep '{n=split($n_column,a,rowsep);
                     for(i=1;i<=n;i++) {$n_column=a[i]; print}}' $filename

